Сумо Игра - Архитектура проекта

Сетевой слой

Message.java
Назначение: Сериализация и десериализация сетевых сообщений.
Взаимодействие:
Используется GameClient и GameServer для передачи данных
Конвертируется в JSON формат с помощью Gson
Типы сообщений: PLAYER_JOIN, PLAYER_MOVE, POWER_UP, ROUND_RESULT
Каждое сообщение содержит playerId (1 или 2) для идентификации отправителя

MessageHandler.java - Интерфейс обработчика сообщений
Назначение: Определяет контракт для обработки входящих сетевых сообщений.
Реализуется: NetworkManager


NetworkService.java - Общий интерфейс для сервера и клиента
Назначение: Унификация работы с сетевыми соединениями.
Зачем нужен?
Убирает дублирование кода в NetworkManager
Позволяет NetworkManager работать с GameServer и GameClient одинаково
определяет стандартный набор операций для сетевых служб
код на уровне интерфейсов - чисто!


GameServer.java - Серверная реализация
Назначение: Принимает подключения клиентов и управляет серверной логикой.
Архитектура:
1. startServer() → создает ServerSocket на указанном порту
2. run() → ожидает подключение клиента в отдельном потоке
3. listenForMessages() → слушает входящие сообщения
4. sendMessage() → отправляет сообщения клиенту
   Особенности:
   Порт: конфигурируется через конструктор
Потоковая модель: основной поток для подключения + отдельный для прослушивания
Автоматическая отправка своего персонажа при подключении клиента
Player ID: всегда 1 (сервер = игрок 1)

GameClient.java - Клиентская реализация
Назначение: Подключается к серверу и управляет клиентским соединением.
Архитектура:
1. connect() → устанавливает соединение с сервером
2. run() → запускает поток для прослушивания сообщений
3. listenForMessages() → обрабатывает входящие сообщения
4. sendMessage() → отправляет сообщения серверу

NetworkManager.java - Центральный координатор сети
Назначение: Управляет всеми сетевыми операциями, связывает сеть с игровой логикой.

Архитектурная роль:
text
┌─────────────────┐    ┌─────────────────┐
│   GameEngine    │    │  GameController │
│     (логика)    │    │     (UI ↔ логика)│
└────────┬────────┘    └────────┬────────┘
│                      │
▼                      ▼
┌─────────────────────────────────────────┐
│           NetworkManager                │
│  (переводчик: игра ↔ сетевые сообщения) │
└─────────────────┬───────────────────────┘
│
┌───────────┴───────────┐
▼                       ▼
┌───────────┐           ┌───────────┐
│ GameServer│           │ GameClient│
│  или      │           │  или      │
│ GameClient│           │ GameServer│
└───────────┘           └───────────┘



